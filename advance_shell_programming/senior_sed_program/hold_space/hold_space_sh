#!/bin/bash

# 模式空间（pattern space）是一个缓冲区，在 sed 编辑器处理命令时保留被检查的文本
# sed编辑器利用 另一个被称为 保留空间（hold space）的缓冲区，在处理模式空间中的其他行时，可以使用保留空间暂时保留文本行

# sed 编辑器保留空间命令

# h : 将模式空间复制到保留空间
# H : 将模式空间追加到保留空间
# g : 将保留空间复制到模式空间
# G : 将保留空间追加到模式空间
# x : 将保留空间和模式空间的内容交换

# 这些命令可以用于将文本行从模式空间复制到保留空间
# 腾空模式空间以便载入其他字符串进行处理
# 通常，使用 h 或 H 移动字符串到保留空间后，最终会使用 g 或 G 或 x 将 保留空间的字符串移回模式空间


# 使用 g 和 h 在 模式空间和保留空间之间移动数据

clear
sed -n '/1/{
h; 
p;
n;
p;
g;
p
}' test1 

# 筛选第一行
# 把第一行放到保留空间中
# p打印模式空间的内容 即第一行的数据
# n检索数据流中的下一行，将其放到模式空间中
# p打印模式空间的内容，第二行
# g把保留空间的内容放回到模式空间，即第一行的数据
# p打印模式空间的内容 ，第一行
