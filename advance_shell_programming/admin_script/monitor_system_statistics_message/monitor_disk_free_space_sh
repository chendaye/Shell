#!/bin/bash

# 系统管理员的主要任务就是确保系统正常运行
# 要完成这一任务就要监视多种系统统计信息


# 监视磁盘空闲空间

# shell 脚本可以用来监视特定卷上的可用空间，并在可用空间低于设置的阈值时发送邮件


# 要自动监视可用的磁盘空间，需要显示这些值得命令
# 最佳的监视磁盘的命令是 df， df显示系统上所有真实的磁盘和虚拟的磁盘当前空间的统计信息


# 现，监视根文件系统的大小
# 首先要解析df命令的结果，提取出根文件系统所在的行


# 分离根文件系统所在的行
# 有多种方法可以实现，最简单的方法是用 sed 搜索以郑谢刚结尾的行
# df | sed -n '/\/$/p'


# 分离此行上的百分比值
# df | sed -n '/\/$/p' | gawk '{print $5}'

# 已经过滤出了此行的第五个值，现在要去掉百分号； 使用 sed
# df | sed -n '/\/$/p' | gawk '{print $5}' | sed 's/%//'


# 创建脚本
# 上面已经知道如何提取磁盘已经使用的空间
# 可以用变量保存此公式的值，再与指定的值比较， 就可以知道是否超过预定值
space=`df | sed -n '/\/$/p' | gawk '{print $5}' | sed 's/%//'`

echo $space

if [ $space -ge 90 ]
then
 echo '磁盘空间告急'
fi

# 脚本已经写好 接下来可以放在定时任务中


